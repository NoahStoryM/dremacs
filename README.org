#+TITLE: DrEmacs
#+AUTHOR: Noah Ma
#+EMAIL: noahstorym@gmail.com

* Table of Contents                                       :TOC_5_gh:noexport:
- [[#introduction][Introduction]]
- [[#philosophy][Philosophy]]
- [[#directory-structure][Directory Structure]]
- [[#bootstrap-process][Bootstrap Process]]
- [[#usage][Usage]]

* Introduction
A structured, Racket-inspired configuration framework for GNU Emacs.

This repository implements a lightweight package management and module system
called *Meta*, designed to bring the explicitness of Racket's collection system
to Emacs Lisp.

* Philosophy
Standard Emacs configuration often suffers from a flat namespace and implicit
dependencies (the global ~load-path~ hell). This framework introduces:

- **Scopes**: Clearly separated installation roots (e.g., ~system~ vs ~user~).
- **Collections**: Logical grouping of modules (similar to Racket collections).
- **Explicit Metadata**: Every package must describe itself via =info.el=.
- **Structured Imports**: Use ~(meta-import (collection module))~ instead of ~(require 'collection/module)~.
- **Structured Exports**: Use ~(meta-export (collection module))~ instead of ~(provide 'collection/module)~.

* Directory Structure
#+begin_src text
~/
├── .emacs.d/               # System Core (DrEmacs)
│   ├── early-init.el       # System Bootstrap (Env & Paths)
│   ├── init.el             # System Loader (Meta System)
│   └── pkgs/               # System Packages
│       └── meta/           # The Core Package Manager
│           ├── info.el
│           └── main.el
│
└── .dremacs.d/             # User Configuration
    ├── early-init.el       # User Bootstrap (GUI & Perf)
    ├── init.el             # User Entry Point
    └── pkgs/               # User Packages
        └── private/        # Your personal configuration
            ├── info.el
            └── main.el
#+end_src

* Bootstrap Process
1. **System Bootstrap** (=.emacs.d/early-init.el=):
   - Calculates the user configuration path (~user-dremacs-directory~).
   - Scaffolds =~/.dremacs.d= from templates if missing.
   - Loads the user's =~/.dremacs.d/early-init.el= file (for GUI/GC optimizations).

2. **System Loading** (=.emacs.d/init.el=):
   - Bootstraps the ~meta~ collection from the system scope.
   - Installs the "system" scope.

3. **User Loading**:
   - Loads the user's =~/.dremacs.d/init.el=.
   - The user then imports their private collections via ~(meta-import ...)~.

* Usage
Just clone this repository to your home directory:

#+BEGIN_SRC sh
git clone https://github.com/NoahStoryM/dremacs ~/.emacs.d
emacs
#+END_SRC

The first launch will initialize your private configuration in =~/.dremacs.d=.
